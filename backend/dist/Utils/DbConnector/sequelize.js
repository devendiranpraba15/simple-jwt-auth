"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.sequelizeInstance=exports["default"]=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _sequelize=require("sequelize");var _envConfig=require("../envConfig");var SEQUELIZE_CONFIG={dialect:(0,_envConfig.getEnv)('sequelizeDialect'),logging:(0,_envConfig.getEnv)('sequelizeLogging')==='true',logQueryParameters:(0,_envConfig.getEnv)('sequelizeLogQueryParams')==='true',minifyAliases:true,define:{freezeTableName:true},pool:{min:Number((0,_envConfig.getEnv)('sequelizePoolMin')),max:Number((0,_envConfig.getEnv)('sequelizePoolMax')),idle:Number((0,_envConfig.getEnv)('sequelizePoolIdleTimeout'))*1000,evict:Number((0,_envConfig.getEnv)('sequelizePoolIdleTimeout'))*1000,acquire:Number((0,_envConfig.getEnv)('sequelizePoolAcquireInterval'))*1000},host:(0,_envConfig.getEnv)('sequelizeDbHost'),port:Number((0,_envConfig.getEnv)('sequelizeDbPort')),database:(0,_envConfig.getEnv)('sequelizeDbName'),username:(0,_envConfig.getEnv)('sequelizeDbUser'),password:(0,_envConfig.getEnv)('sequelizeDbPassword')};var sequelizeInstance=exports.sequelizeInstance=new _sequelize.Sequelize(SEQUELIZE_CONFIG);var _default=exports["default"]=function _default(){sequelizeInstance.authenticate().then(function(){console.info("Sequelize(".concat((0,_envConfig.getEnv)('sequelizeDialect'),") Connected...."));})["catch"](function(err){console.error(err);});process.on('SIGINT',/*#__PURE__*/(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(){return _regenerator["default"].wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return sequelizeInstance.close();case 3:console.warn("Sequelize(".concat((0,_envConfig.getEnv)('sequelizeDialect'),") connection is disconnected due to app termination..."));process.exit(0);_context.next=11;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);console.error(_context.t0);process.exit(1);case 11:case"end":return _context.stop();}},_callee,null,[[0,7]]);})));};
//# sourceMappingURL=sequelize.js.map