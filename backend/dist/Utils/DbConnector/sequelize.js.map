{"version":3,"file":"sequelize.js","names":["_sequelize","require","_envConfig","SEQUELIZE_CONFIG","dialect","getEnv","logging","logQueryParameters","minifyAliases","define","freezeTableName","pool","min","Number","max","idle","evict","acquire","host","port","database","username","password","sequelizeInstance","exports","Sequelize","_default","authenticate","then","console","info","concat","err","error","process","on","_asyncToGenerator2","_regenerator","mark","_callee","wrap","_callee$","_context","prev","next","close","warn","exit","t0","stop"],"sources":["../../../src/Utils/DbConnector/sequelize.js"],"sourcesContent":["import { Sequelize } from 'sequelize';\r\nimport { getEnv } from '../envConfig';\r\n\r\nconst SEQUELIZE_CONFIG = {\r\n  dialect: getEnv('sequelizeDialect'),\r\n  logging: getEnv('sequelizeLogging') === 'true',\r\n  logQueryParameters: getEnv('sequelizeLogQueryParams') === 'true',\r\n  minifyAliases: true,\r\n  define: {\r\n    freezeTableName: true,\r\n  },\r\n  pool: {\r\n    min: Number(getEnv('sequelizePoolMin')),\r\n    max: Number(getEnv('sequelizePoolMax')),\r\n    idle: Number(getEnv('sequelizePoolIdleTimeout')) * 1000,\r\n    evict: Number(getEnv('sequelizePoolIdleTimeout')) * 1000,\r\n    acquire: Number(getEnv('sequelizePoolAcquireInterval')) * 1000,\r\n  },\r\n  host: getEnv('sequelizeDbHost'),\r\n  port: Number(getEnv('sequelizeDbPort')),\r\n  database: getEnv('sequelizeDbName'),\r\n  username: getEnv('sequelizeDbUser'),\r\n  password: getEnv('sequelizeDbPassword'),\r\n};\r\n\r\nexport const sequelizeInstance = new Sequelize(SEQUELIZE_CONFIG);\r\n\r\nexport default () => {\r\n  sequelizeInstance\r\n    .authenticate()\r\n    .then(() => {\r\n      console.info(`Sequelize(${getEnv('sequelizeDialect')}) Connected....`);\r\n    })\r\n    .catch((err) => {\r\n      console.error(err);\r\n    });\r\n\r\n  process.on('SIGINT', async () => {\r\n    try {\r\n      await sequelizeInstance.close();\r\n      console.warn(`Sequelize(${getEnv('sequelizeDialect')}) connection is disconnected due to app termination...`);\r\n      process.exit(0);\r\n    } catch (err) {\r\n      console.error(err);\r\n      process.exit(1);\r\n    }\r\n  });\r\n};\r\n"],"mappings":"8XAAA,IAAAA,UAAA,CAAAC,OAAA,cACA,IAAAC,UAAA,CAAAD,OAAA,iBAEA,GAAM,CAAAE,gBAAgB,CAAG,CACvBC,OAAO,CAAE,GAAAC,iBAAM,EAAC,kBAAkB,CAAC,CACnCC,OAAO,CAAE,GAAAD,iBAAM,EAAC,kBAAkB,CAAC,GAAK,MAAM,CAC9CE,kBAAkB,CAAE,GAAAF,iBAAM,EAAC,yBAAyB,CAAC,GAAK,MAAM,CAChEG,aAAa,CAAE,IAAI,CACnBC,MAAM,CAAE,CACNC,eAAe,CAAE,IACnB,CAAC,CACDC,IAAI,CAAE,CACJC,GAAG,CAAEC,MAAM,CAAC,GAAAR,iBAAM,EAAC,kBAAkB,CAAC,CAAC,CACvCS,GAAG,CAAED,MAAM,CAAC,GAAAR,iBAAM,EAAC,kBAAkB,CAAC,CAAC,CACvCU,IAAI,CAAEF,MAAM,CAAC,GAAAR,iBAAM,EAAC,0BAA0B,CAAC,CAAC,CAAG,IAAI,CACvDW,KAAK,CAAEH,MAAM,CAAC,GAAAR,iBAAM,EAAC,0BAA0B,CAAC,CAAC,CAAG,IAAI,CACxDY,OAAO,CAAEJ,MAAM,CAAC,GAAAR,iBAAM,EAAC,8BAA8B,CAAC,CAAC,CAAG,IAC5D,CAAC,CACDa,IAAI,CAAE,GAAAb,iBAAM,EAAC,iBAAiB,CAAC,CAC/Bc,IAAI,CAAEN,MAAM,CAAC,GAAAR,iBAAM,EAAC,iBAAiB,CAAC,CAAC,CACvCe,QAAQ,CAAE,GAAAf,iBAAM,EAAC,iBAAiB,CAAC,CACnCgB,QAAQ,CAAE,GAAAhB,iBAAM,EAAC,iBAAiB,CAAC,CACnCiB,QAAQ,CAAE,GAAAjB,iBAAM,EAAC,qBAAqB,CACxC,CAAC,CAEM,GAAM,CAAAkB,iBAAiB,CAAAC,OAAA,CAAAD,iBAAA,CAAG,GAAI,CAAAE,oBAAS,CAACtB,gBAAgB,CAAC,CAAC,IAAAuB,QAAA,CAAAF,OAAA,YAElD,SAAAE,SAAA,CAAM,CACnBH,iBAAiB,CACdI,YAAY,CAAC,CAAC,CACdC,IAAI,CAAC,UAAM,CACVC,OAAO,CAACC,IAAI,cAAAC,MAAA,CAAc,GAAA1B,iBAAM,EAAC,kBAAkB,CAAC,mBAAiB,CAAC,CACxE,CAAC,CAAC,SACI,CAAC,SAAC2B,GAAG,CAAK,CACdH,OAAO,CAACI,KAAK,CAACD,GAAG,CAAC,CACpB,CAAC,CAAC,CAEJE,OAAO,CAACC,EAAE,CAAC,QAAQ,iBAAAC,kBAAA,0BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAC,QAAA,SAAAF,YAAA,YAAAG,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEX,CAAArB,iBAAiB,CAACsB,KAAK,CAAC,CAAC,QAC/BhB,OAAO,CAACiB,IAAI,cAAAf,MAAA,CAAc,GAAA1B,iBAAM,EAAC,kBAAkB,CAAC,0DAAwD,CAAC,CAC7G6B,OAAO,CAACa,IAAI,CAAC,CAAC,CAAC,CAACL,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAM,EAAA,CAAAN,QAAA,aAEhBb,OAAO,CAACI,KAAK,CAAAS,QAAA,CAAAM,EAAI,CAAC,CAClBd,OAAO,CAACa,IAAI,CAAC,CAAC,CAAC,CAAC,yBAAAL,QAAA,CAAAO,IAAA,MAAAV,OAAA,gBAEnB,GAAC,CACJ,CAAC","ignoreList":[]}